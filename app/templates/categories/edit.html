{% extends 'base.html' %}
{% block title %}编辑分类{% endblock %}
{% block content %}
<div class="page-header">
  <h2>编辑分类</h2>
  <div class="header-actions">
    <a class="btn btn-default" href="{{ url_for('categories.list_categories') }}">返回列表</a>
  </div>
</div>
<form method="post" action="{{ url_for('categories.update_category', category_id=category.id) }}" class="form-horizontal">
  <div class="form-group">
    <label class="col-sm-2 control-label">名称</label>
    <div class="col-sm-6">
      <input type="text" name="name" class="form-control" value="{{ category.name }}" required>
    </div>
  </div>
  <div class="form-group">
    <label class="col-sm-2 control-label">父分类</label>
    <div class="col-sm-6">
      <select name="parent_id" class="form-control">
        <option value=""{% if not category.parent_id %} selected{% endif %}>顶级分类</option>
        {% for item in category_options %}
        {% set option = item.category %}
        {% set indent = '&nbsp;&nbsp;&nbsp;&nbsp;' * item.depth %}
        {% set prefix = '└ ' if item.depth > 0 else '' %}
        <option value="{{ option.id }}"{% if category.parent_id == option.id %} selected{% endif %}>{{ indent|safe }}{{ prefix }}{{ option.name }}</option>
        {% endfor %}
      </select>
    </div>
  </div>
  <div class="form-group">
    <label class="col-sm-2 control-label">排序</label>
    <div class="col-sm-6">
      <input type="number" name="sort" class="form-control" value="{{ category.sort }}">
    </div>
  </div>
  <div class="form-group">
    <div class="col-sm-offset-2 col-sm-6">
      <button type="submit" class="btn btn-primary">保存</button>
    </div>
  </div>
</form>
{% endblock %}
